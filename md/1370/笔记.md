早期的结构：

![](http://oss-file-cache.oss-cn-shanghai.aliyuncs.com/1648009293_image.png)


- UART 驱动
如上图所示，物理终端通过电缆连接到计算机上的 UART(通用异步接收器和发射器)。操作系统中有一个 UART 驱动程序用于管理字节的物理传输。

- 行规范
上图中内核中的 Line discipline(行规范)用来提供一个编辑缓冲区和一些基本的编辑命令(退格，清除单个单词，清除行，重新打印)，主要用来支持用户在输入时的行为(比如输错了，需要退格)。

- TTY 驱动
TTY 驱动用来进行会话管理，并且处理各种终端设备。

UART 驱动、行规范和 TTY 驱动都位于内核中，它们的一端是终端设备，另一端是用户进程。因为在 Linux 下所有的设备都是文件，所以它们三个加在一起被称为 "TTY 设备"，即我们常说的 TTY。

--------------------

以上结构是为了早期多人使用一台计算机的情况：

![](http://oss-file-cache.oss-cn-shanghai.aliyuncs.com/1648010337_image.png)

即每个人使用硬件设备链接到电脑上，电脑处理完之后再返回给终端。

现在的结构：

![](http://oss-file-cache.oss-cn-shanghai.aliyuncs.com/1648010455_image.png)

后来的终端慢慢演变成了键盘 + 显示器。如果我们要把内容输出到显示器，只要把这些内容写入到显示器对应的 TTY 设备就可以了，然后由 TTY 层负责匹配合适的驱动完成输出，这也是 Linux 控制台的工作原理。

`/dev/tty1-/dev/tty6` 是这些仿真终端在文件系统中的表示，程序通过对这些文件的读写实现对仿真终端的读写。

